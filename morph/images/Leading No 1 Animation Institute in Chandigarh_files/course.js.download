!function(e){function t(){jQuery(".fitvids").fitVids(),jQuery(".tip").tooltip(),jQuery(".nav-tabs li:first a").tab("show"),jQuery(".nav-tabs li a").click(function(t){t.preventDefault(),e(this).tab("show")}),e("audio,video").mediaelementplayer(),jQuery(".gallery").magnificPopup({delegate:"a",type:"image",tLoading:"Loading image #%curr%...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(e){return e.el.attr("title")}}}),e(".ajax-popup-link").magnificPopup({type:"ajax",alignTop:!0,fixedContentPos:!0,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in"}),e(".quiz_results_popup").magnificPopup({type:"ajax",alignTop:!0,fixedContentPos:!0,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in",callbacks:{parseAjax:function(t){t.data=e(t.data).find("#item-body")},ajaxContentAdded:function(){e(".show_explaination").on("click",function(t){t.preventDefault();var i=e(this);i.toggleClass("active"),i.closest("li").find(".explaination").toggle()}),e("#prev_results a").on("click",function(t){t.preventDefault(),e(this).toggleClass("show"),e(".prev_quiz_results").toggleClass("show")}),e(".print_results").click(function(t){t.preventDefault(),e(".quiz_result").print()}),e(".quiz_retake_form.start_quiz").on("click",function(t){t.preventDefault();var i=e("#unit.quiz_title").attr("data-unit");e.ajax({type:"POST",url:ajaxurl,data:{action:"retake_inquiz",security:e("#hash").val(),quiz_id:i},cache:!1,success:function(t){e('a.unit[data-unit="'+i+'"]').trigger("click"),e.magnificPopup.close(),e("#unit"+i).removeClass("done"),e("body").find(".course_progressbar").removeClass("increment_complete"),e("body").find(".course_progressbar").trigger("decrement")}})})}}}),"function"==typeof vc_js&&window.vc_js()}function i(){e("#question").each(function(){var t=e(this);e("#submit").click(function(i){i.preventDefault();var a="";e("#ajaxloader").removeClass("disabled"),e("#question").css("opacity",.2),t.find('input[type="radio"]:checked').length&&t.find('input[type="radio"]:checked').each(function(){a=e(this).val()}),t.find('input[type="checkbox"]:checked').length&&t.find('input[type="checkbox"]:checked').each(function(){a=e(this).val()+","+a}),t.find(".vibe_fillblank").length&&t.find(".vibe_fillblank").each(function(){a+=e(this).text()}),t.find("#vibe_select_dropdown").length&&(a=t.find("#vibe_select_dropdown").val()),t.find(".matchgrid_options li.match_option").length&&e(".matchgrid_options li.match_option").each(function(){var t=e(this).attr("id");jQuery.isNumeric(t)&&(a+=t+",")}),e("#comment").hasClass("option_value")&&e("#comment.option_value").val(a),e("#commentform").submit()});var i=e("#commentform"),a=e("#comment-status"),s=a.attr("data-quesid");i.submit(function(){var t=i.serialize();a.html("<p>"+vibe_course_module_strings.processing+"</p>");var n=i.attr("action");return e.ajax({type:"post",url:n,data:t,error:function(t,i,s){e("#ajaxloader").addClass("disabled"),e("#question").css("opacity",1),a.html('<p class="wdpajax-error">'+vibe_course_module_strings.too_fast_answer+"</p>"),setTimeout(function(){a.hide(300).html("").show()},2e3)},success:function(t,i){e("#question").css("opacity",1),e("#ajaxloader").addClass("disabled"),"success"==t?(a.html('<p class="ajax-success" >'+vibe_course_module_strings.answer_saved+"</p>"),setTimeout(function(){a.hide(300).html("").show()},2e3),e("#ques"+s).addClass("done"),e(".reset_answer").removeClass("hide")):(a.html('<p class="ajax-error" >'+vibe_course_module_strings.saving_answer+"</p>"),setTimeout(function(){a.hide(300).html("").show()},2e3))}}),!1})})}function a(){e(".question_marks").blur(function(){var t=parseInt(0),i=e("#total_marks strong > span");e(".question_marks").each(function(){e(this).val()&&(t+=parseInt(e(this).val()))}),i.html(t)})}!function(e){"use strict";function t(t){var i=e("");try{i=e(t).clone()}catch(a){i=e("<span />").html(t)}return i}function i(e){return!!("object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}e.print=e.fn.print=function(){var a,s,n=this;n instanceof e&&(n=n.get(0)),i(n)?(s=e(n),arguments.length>0&&(a=arguments[0])):arguments.length>0?(s=e(arguments[0]),i(s[0])?arguments.length>1&&(a=arguments[1]):(a=arguments[0],s=e("html"))):s=e("html");var r={globalStyles:!0,mediaPrint:!1,stylesheet:null,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null};a=e.extend({},r,a||{});var o=e("");a.globalStyles?o=e("style, link, meta, title"):a.mediaPrint&&(o=e("link[media=print]")),a.stylesheet&&(o=e.merge(o,e('<link rel="stylesheet" href="'+a.stylesheet+'">')));var c=s.clone();c=e("<span/>").append(c),c.find(a.noPrintSelector).remove(),c.append(o.clone()),c.append(t(a.append)),c.prepend(t(a.prepend));var l=c.html();c.remove();var u,d;if(a.iframe)try{var m=e(a.iframe+""),_=m.length;0===_&&(m=e('<iframe height="0" width="0" border="0" wmode="Opaque"/>').prependTo("body").css({position:"absolute",top:-999,left:-999})),u=m.get(0),u=u.contentWindow||u.contentDocument||u,d=u.document||u.contentDocument||u,d.open(),d.write(l),d.close(),setTimeout(function(){u.focus(),u.print(),setTimeout(function(){0===_&&m.remove()},100)},250)}catch(h){console.error("Failed to print from iframe",h.stack,h.message),u=window.open(),u.document.write(l),u.document.close(),u.focus(),u.print(),u.close()}else u=window.open(),u.document.write(l),u.document.close(),u.focus(),u.print(),u.close();return this}}(jQuery),e.fn.timer=function(t){var i,a,s=e(this),n=0;i=e.extend({timer:300,width:24,height:24,fgColor:"#ED7A53",bgColor:"#232323"},t),s.knob({min:0,max:i.timer,readOnly:!0,width:i.width,height:i.height,fgColor:i.fgColor,bgColor:i.bgColor,displayInput:!1,dynamicDraw:!1,ticks:0,thickness:.1}),setInterval(function(){a=++n,s.val(a).trigger("change")},1e3)},e.urlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:t[1]||0},jQuery(document).ready(function(e){function i(){e(".category_filter .bp-course-category-filter,.type_filter .bp-course-free-filter,.level_filter .bp-course-level-filter,.instructor_filter .bp-course-instructor-filter").on("click",function(){var t=[];e(".bp-course-category-filter:checked").each(function(){var i={type:"course-cat",value:e(this).val()};t.push(i)}),e(".bp-course-free-filter:checked").each(function(){var i={type:"free",value:e(this).val()};t.push(i)}),e(".bp-course-level-filter:checked").each(function(){var i={type:"level",value:e(this).val()};t.push(i)}),e(".bp-course-instructor-filter:checked").each(function(){var i={type:"instructor",value:e(this).val()};t.push(i)}),e.cookie("bp-course-extras",JSON.stringify(t),{expires:1,path:"/"})})}function s(){var t=e.cookie("bp-course-extras");if(null!==t){var i=JSON.parse(t);e("#active_filters").length?e("#active_filters").fadeIn(200):e("#course-dir-list").before('<ul id="active_filters"><li>'+vibe_course_module_strings.active_filters+"</li></ul>"),jQuery.each(i,function(t,i){e('input[value="'+i.value+'"]').prop("checked",!0);var a=e('input[value="'+i.value+'"]').attr("id"),s=e('label[for="'+a+'"]').text();e('#active_filters span[data-id="'+a+'"]').length||e("#active_filters").append('<li><span data-id="'+a+'">'+s+"</span></li>")}),e("#active_filters li span").on("click",function(){var t=e(this).attr("data-id");console.log(t),e(this).parent().fadeOut(200,function(){e(this).remove(),e("#active_filters li").length<3?e("#active_filters").fadeOut(200):e("#active_filters").fadeIn(200)}),e("#"+t).prop("checked",!1);var i=[];e(".bp-course-category-filter:checked").each(function(){var t={type:"course-cat",value:e(this).val()};i.push(t)}),e(".bp-course-free-filter:checked").each(function(){var t={type:"free",value:e(this).val()};i.push(t)}),e(".bp-course-level-filter:checked").each(function(){var t={type:"level",value:e(this).val()};i.push(t)}),e(".bp-course-instructor-filter:checked").each(function(){var t={type:"instructor",value:e(this).val()};i.push(t)}),e.cookie("bp-course-extras",JSON.stringify(i),{expires:1,path:"/"}),e("#submit_filters").trigger("click")}),e("#active_filters .all-filter-clear").length||e("#active_filters").append('<li class="all-filter-clear">'+vibe_course_module_strings.clear_filters+"</li>"),e("#active_filters li.all-filter-clear").click(function(){e("#active_filters li").each(function(){var t=e(this).find("span"),i=t.attr("data-id");t.parent().fadeOut(200,function(){e(this).remove()}),e("#"+i).prop("checked",!1),e("#active_filters").fadeOut(200,function(){e(this).remove()}),e.removeCookie("bp-course-extras",{path:"/"}),console.log("check"),e("#submit_filters").trigger("click")})}),e("#active_filters li").length<3?e("#active_filters").fadeOut(200):e("#active_filters").fadeIn(200)}}e(".item-list").each(function(){var t="bp-"+e(".item-list").attr("id"),i=e.cookie(t);null!==i&&"grid"==i&&(e(".item-list").addClass("grid"),e("#list_view").removeClass("active"),e("#grid_view").addClass("active"))}),s(),i(),e(".category_filter li > label").click(function(t){var i=e(this).parent();i.find("ul.sub_categories").toggle(300)}),e("#submit_filters").on("click",function(){if(jq(".item-list-tabs li.selected").length)var e=jq(".item-list-tabs li.selected");else var e=jq(this);var t=e.attr("id").split("-"),a=t[0],n=t[1],r=jq(this).val(),o=!1;return jq(".dir-search input").length&&(o=jq(".dir-search input").val()),"friends"==a&&(a="members"),i(),bp_filter_request(a,r,n,"div."+a,o,1,jq.cookie("bp-"+a+"-extras")),s(),!1}),e(".quiz_results_popup").magnificPopup({type:"ajax",alignTop:!0,fixedContentPos:!0,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in",callbacks:{parseAjax:function(t){t.data=e(t.data).find("#item-body")},ajaxContentAdded:function(){e("#prev_results a").on("click",function(t){t.preventDefault(),e(this).toggleClass("show"),e(".prev_quiz_results").toggleClass("show")}),e(".print_results").click(function(t){t.preventDefault(),e(".quiz_result").print()})}}}),e("#grid_view").click(function(){e(".item-list").hasClass("grid")||e(".item-list").addClass("grid");var t="bp-"+e(".item-list").attr("id");e.cookie(t,"grid",{expires:2,path:"/"}),e("#list_view").removeClass("active"),e(this).addClass("active")}),e("#list_view").click(function(){e(".item-list").removeClass("grid");var t="bp-"+e(".item-list").attr("id");e.cookie(t,"list",{expires:2,path:"/"}),e("#grid_view").removeClass("active"),e(this).addClass("active")}),e("#average .dial").knob({readOnly:!0,width:120,height:120,fgColor:vibe_course_module_strings.theme_color,bgColor:"#f6f6f6",thickness:.1}),e("#pass .dial").knob({readOnly:!0,width:120,height:120,fgColor:vibe_course_module_strings.theme_color,bgColor:"#f6f6f6",thickness:.1}),e("#badge .dial").knob({readOnly:!0,width:120,height:120,fgColor:vibe_course_module_strings.theme_color,bgColor:"#f6f6f6",thickness:.1}),e(".course_quiz .dial").knob({readOnly:!0,width:120,height:120,fgColor:vibe_course_module_strings.theme_color,bgColor:"#f6f6f6",thickness:.1}),e("body").delegate(".remove_user_course","click",function(i){i.preventDefault();var a=e(this).attr("data-course"),s=e(this).attr("data-user");e(this).addClass("animated spin");var n=e(this);e.confirm({text:vibe_course_module_strings.remove_user_text,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"remove_user_course",security:e("#security").val(),id:a,user:s},cache:!1,success:function(i){e(this).removeClass("animated"),e(this).removeClass("spin"),t(),e("#message").html(i),e("#s"+s).fadeOut("fast")}})},cancel:function(){n.removeClass("animated"),n.removeClass("spin")},confirmButton:vibe_course_module_strings.remove_user_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate(".reset_course_user","click",function(t){t.preventDefault();var i=e(this).attr("data-course"),a=e(this).attr("data-user");e(this).addClass("animated spin");var s=e(this);e.confirm({text:vibe_course_module_strings.reset_user_text,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"reset_course_user",security:e("#security").val(),id:i,user:a},cache:!1,success:function(t){s.removeClass("animated"),s.removeClass("spin");var a="course_progress"+i;e.removeCookie(a,{path:"/"}),e("#message").html(t)}})},cancel:function(){s.removeClass("animated"),s.removeClass("spin")},confirmButton:vibe_course_module_strings.reset_user_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate(".course_stats_user","click",function(t){t.preventDefault();var i=e(this),a=i.attr("data-course"),s=i.attr("data-user");i.hasClass("already")?e("#s"+s).find(".course_stats_user").fadeIn("fast"):(i.addClass("animated spin"),e.ajax({type:"POST",url:ajaxurl,data:{action:"course_stats_user",security:e("#security").val(),id:a,user:s},cache:!1,success:function(t){i.removeClass("animated"),i.removeClass("spin"),i.addClass("already"),e("#s"+s).append(t),e(".dial").knob({readOnly:!0,width:160,height:160,fgColor:vibe_course_module_strings.theme_color,bgColor:"#f6f6f6",thickness:.3})}}))}),e(".data_stats li").click(function(t){t.preventDefault();var i=e(this).html(),a=(e(".content"),e(this)),s=e(this).attr("id");if("desc"==s)e(".main_content").show(),e(".stats_content").hide();else if(e(this).hasClass("loaded"))e(".main_content").hide(),e(".stats_content").show();else{a.addClass("loaded"),e(".main_content").hide(),e(this).html('<i class="icon-sun-stroke"></i>');var n=a.parent().attr("data-id"),r=a.parent().attr("data-type");e.ajax({type:"POST",url:ajaxurl,data:{action:"load_stats",cpttype:r,id:n},cache:!1,success:function(t){e(".main_content").after(t),setTimeout(function(){a.html(i)},1e3)}})}a.parent().find(".active").removeClass("active"),a.addClass("active")}),e("#calculate_avg_course").click(function(t){t.preventDefault();var i=e(this).attr("data-courseid");e(this).addClass("animated spin"),e.ajax({type:"POST",url:ajaxurl,data:{action:"calculate_stats_course",security:e("#security").val(),id:i},cache:!1,success:function(t){e(this).removeClass("animated"),e(this).removeClass("spin"),e("#message").html(t),setTimeout(function(){location.reload()},3e3)}})}),e(".reset_quiz_user").click(function(t){t.preventDefault();var i=e(this).attr("data-quiz"),a=e(this).attr("data-user");e(this).addClass("animated spin");var s=e(this);e.confirm({text:vibe_course_module_strings.quiz_rest,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"reset_quiz",security:e("#qsecurity").val(),id:i,user:a},cache:!1,success:function(t){e(this).removeClass("animated"),e(this).removeClass("spin"),e("#message").html(t),e("#qs"+a).fadeOut("fast")}})},cancel:function(){s.removeClass("animated"),s.removeClass("spin")},confirmButton:vibe_course_module_strings.quiz_rest_button,cancelButton:vibe_course_module_strings.cancel})}),e(".evaluate_quiz_user").click(function(t){t.preventDefault();var i=e(this).attr("data-quiz"),s=e(this).attr("data-user");e(this).addClass("animated spin"),e.ajax({type:"POST",url:ajaxurl,data:{action:"evaluate_quiz",security:e("#qsecurity").val(),id:i,user:s},cache:!1,success:function(t){e(this).removeClass("animated"),e(this).removeClass("spin"),e(".quiz_students").html(t),a()}})}),e(".evaluate_course_user").click(function(t){t.preventDefault();var i=e(this).attr("data-course"),s=e(this).attr("data-user");e(this).addClass("animated spin"),e.ajax({type:"POST",url:ajaxurl,data:{action:"evaluate_course",security:e("#security").val(),id:i,user:s},cache:!1,success:function(t){e(this).removeClass("animated"),e(this).removeClass("spin"),e(".course_students").html(t),a()}})}),e("body").delegate(".reset_answer","click",function(t){t.preventDefault();var i=e("#comment-status").attr("data-quesid"),a=e(this),s=e("#comment-status").attr("data-quesid");a.prepend('<i class="icon-sun-stroke animated spin"></i>'),e.ajax({type:"POST",url:ajaxurl,data:{action:"reset_question_answer",security:a.attr("data-security"),ques_id:i},cache:!1,success:function(t){a.find("i").remove(),e("#comment-status").html(t),e("#ques"+s).removeClass("done"),setTimeout(function(){a.addClass("hide")},500)}})}),e("body").delegate("#course_complete","click",function(t){t.preventDefault();var i=e(this),a=i.attr("data-user"),s=i.attr("data-course"),n=parseInt(e("#course_marks_field").val());return 0>=n?void alert("Enter Marks for User"):(i.prepend('<i class="icon-sun-stroke animated spin"></i>'),void e.ajax({type:"POST",url:ajaxurl,data:{action:"complete_course_marks",course:s,user:a,marks:n},cache:!1,success:function(e){i.find("i").remove(),i.html(e)}}))}),e(".register-section h4").click(function(){e(this).toggleClass("show"),e(this).parent().find(".editfield").toggle("fast")})}),e("body").delegate(".hide_parent","click",function(t){e(this).parent().fadeOut("fast")}),e("body").delegate(".give_marks","click",function(t){t.preventDefault();var i=e(this),a=i.attr("data-ans-id"),s=e("#"+a).val();i.prepend('<i class="icon-sun-stroke animated spin"></i>'),e.ajax({type:"POST",url:ajaxurl,data:{action:"give_marks",aid:a,aval:s},cache:!1,success:function(e){i.find("i").remove(),i.html(vibe_course_module_strings.marks_saved)}})}),e("body").delegate("#mark_complete","click",function(t){t.preventDefault();var i=e(this),a=i.attr("data-quiz"),s=i.attr("data-user"),n=parseInt(e("#total_marks strong > span").text());i.prepend('<i class="icon-sun-stroke animated spin"></i>'),e.ajax({type:"POST",url:ajaxurl,data:{action:"save_quiz_marks",quiz_id:a,user_id:s,marks:n},cache:!1,success:function(e){i.find("i").remove(),i.html(vibe_course_module_strings.quiz_marks_saved)}})}),e("body").delegate(".submit_quiz","click",function(t){if(t.preventDefault(),e("#ajaxloader").removeClass("disabled"),e(this).hasClass("disabled"))return!1;var i=e(this),a=e(this).attr("data-quiz");i.prepend('<i class="icon-sun-stroke animated spin"></i>'),e("#question").addClass("quiz_submitted_fade"),e.ajax({type:"POST",url:ajaxurl,data:{action:"submit_quiz",start_quiz:e("#start_quiz").val(),id:a},cache:!1,success:function(t){e("#question").css("opacity",.2),i.find("i").remove(),window.location.assign(document.URL)}})}),jQuery(document).ready(function(e){e(".begin_quiz").click(function(a){a.preventDefault();var s=e(this),n=e(this).attr("data-quiz");s.prepend('<i class="icon-sun-stroke animated spin"></i>'),e.ajax({type:"POST",url:ajaxurl,data:{action:"begin_quiz",start_quiz:e("#start_quiz").val(),id:n},cache:!1,success:function(a){s.find("i").remove(),e(".content").fadeOut("fast"),e(".content").html(a),e(".content").fadeIn("fast"),i();var n=e(e.parseHTML(a)).filter("#question"),r="#ques"+n.attr("data-ques");e(".quiz_timeline").find(".active").removeClass("active"),e(r).addClass("active"),e("#question").trigger("question_loaded"),"undefined"!=n&&e(".quiz_timer").trigger("activate"),t(),e(".begin_quiz").each(function(){e(this).removeClass("begin_quiz"),e(this).addClass("submit_quiz"),e(this).text(vibe_course_module_strings.submit_quiz)})}})})}),e("body").delegate(".show_hint","click",function(t){t.preventDefault(),e(this).toggleClass("active"),e(this).parent().find(".hint").toggle(400)}),e(".show_explaination").click(function(t){t.preventDefault();var i=e(this);i.toggleClass("active"),i.closest("li").find(".explaination").toggle()}),e("body").delegate(".quiz_question","click",function(t){t.preventDefault();var a=e(this),s=e(this).attr("data-quiz"),n=e(this).attr("data-qid");a.prepend('<i class="icon-sun-stroke animated spin"></i>'),e("#ajaxloader").removeClass("disabled"),e("#question").css("opacity",.2),e.ajax({type:"POST",url:ajaxurl,data:{action:"quiz_question",start_quiz:e("#start_quiz").val(),quiz_id:s,ques_id:n},cache:!1,success:function(t){a.find("i").remove(),e(".content").html(t),e("#ajaxloader").addClass("disabled"),e("#question").css("opacity",1),i();var s=e(e.parseHTML(t)).filter("#question"),n="#ques"+s.attr("data-ques");e(".quiz_timeline").find(".active").removeClass("active"),e(n).addClass("active"),e("#question").trigger("question_loaded"),e(".tip").tooltip(),e("audio,video").mediaelementplayer(),e(".timeline_wrapper").height()>e(".quiz_timeline").height()&&e(".quiz_timeline").animate({scrollTop:e(n).position().top},"slow")}})}),e("body").delegate("#question","question_loaded",function(){if(t(),jQuery(".question_options.sort").each(function(){var t="1",i=e("ul.question_options li").size();if(i>1)for(var a=2;i>=a;a++)t=t+","+a;e("#comment").val(t),e("#comment").trigger("change"),jQuery(".question_options.sort").sortable({revert:!0,cursor:"move",refreshPositions:!0,opacity:.6,scroll:!0,containment:"parent",placeholder:"placeholder",tolerance:"pointer",update:function(t,i){var a=e(".question_options.sort").sortable("toArray").toString();e("#comment").val(a),e("#comment").trigger("change")}}).disableSelection()}),e(".live-edit").liveEdit({afterSaveAll:function(e){return!1}}),e(".question_options.match").droppable({drop:function(t,i){e(i.draggable).removeAttr("style"),e(this).addClass("ui-state-highlight").append(e(i.draggable))}}),e(".question_options.match li").draggable({revert:"invalid",containment:"#question"}),e(".matchgrid_options li").droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",drop:function(t,i){childCount=e(this).find("li").length,e(i.draggable).removeAttr("style"),0==childCount&&e(this).addClass("ui-state-highlight").append(e(i.draggable))}}),e(".matchgrid_options").hasClass("saved_answer")){var i;e(".matchgrid_options li").each(function(t,a){i=e(".matchgrid_options").attr("data-match"+t),e(this).append(e("#"+i))})}}),jQuery(document).ready(function(e){e(".quiz_timer").one("activate",function(){var t=parseInt(e(this).attr("data-time")),i=e(this).find(".timer"),a=e(this);i.timer({timer:t,width:200,height:200,fgColor:vibe_course_module_strings.theme_color,bgColor:vibe_course_module_strings.single_dark_color});var i=e(this).find(".timer");i.on("change",function(){var t=a.find(".countdown"),s=parseInt(i.attr("data-timer"));if(s>0){s--,i.attr("data-timer",s);var n="";n=s>60?Math.floor(s/60)+":"+(parseInt(s%60)<10?"0"+parseInt(s%60):parseInt(s%60)):"00:"+(10>s?"0"+s:s),t.html(n)}else t.html(vibe_course_module_strings.theme_color),e(".submit_quiz").hasClass("triggerred")||(e(".submit_quiz").trigger("click"),e(".submit_quiz").addClass("triggerred")),e(".quiz_timer").trigger("end")})}),e(".quiz_timer").one("deactivate",function(){var t=parseInt(e(this).attr("data-time")),i=e(this).find(".timer");e(this);i.knob({readonly:!0,max:t,width:200,height:200,fgColor:vibe_course_module_strings.theme_color,bgColor:vibe_course_module_strings.single_dark_color,thickness:.2,readonly:!0}),event.stopPropagation()}),e(".quiz_timer").one("end",function(t){var i=parseInt(e(this).attr("data-time")),a=e(this).find(".timer");e(this);a.knob({readonly:!0,max:i,width:200,height:200,fgColor:vibe_course_module_strings.theme_color,bgColor:vibe_course_module_strings.single_dark_color,thickness:.2,readonly:!0}),t.stopPropagation()}),e(".quiz_timer").each(function(){var t=parseInt(e(this).attr("data-time")),i=e(this).find(".timer");i.knob({readonly:!0,max:t,width:200,height:200,fgColor:vibe_course_module_strings.theme_color,bgColor:vibe_course_module_strings.single_dark_color,thickness:.2,readonly:!0}),e(this).hasClass("start")&&e(".quiz_timer").trigger("activate")}),jQuery(".question_options.sort").each(function(){var t="1",i=e("ul.question_options li").size();if(i>1)for(var a=2;i>=a;a++)t=t+","+a;e("#comment").val(t),e("#comment").trigger("change"),jQuery(".question_options.sort").sortable({revert:!0,cursor:"move",refreshPositions:!0,opacity:.6,scroll:!0,containment:"parent",placeholder:"placeholder",tolerance:"pointer",update:function(t,i){var a=e(".question_options.sort").sortable("toArray").toString();e("#comment").val(a),e("#comment").trigger("change")}}).disableSelection()})}),e("body").delegate(".expand_message","click",function(t){t.preventDefault(),e(".bulk_message").toggle("slow")}),e("body").delegate(".expand_add_students","click",function(t){t.preventDefault(),e(".bulk_add_students").toggle("slow")}),e("body").delegate(".expand_assign_students","click",function(t){t.preventDefault(),e(".bulk_assign_students").toggle("slow")}),e("body").delegate(".extend_subscription_students","click",function(t){t.preventDefault(),e(".bulk_extend_subscription_students").toggle("slow")}),e("body").delegate("#send_course_message","click",function(t){t.preventDefault();var i=[],a=e(this),s=a.html();a.html('<i class="icon-sun-stroke animated spin"></i> '+vibe_course_module_strings.sending_messages);var n=0;e(".member").each(function(){e(this).is(":checked")&&(i[n]=e(this).val(),n++)}),e.ajax({type:"POST",url:ajaxurl,data:{action:"send_bulk_message",security:e("#buk_action").val(),course:a.attr("data-course"),sender:e("#sender").val(),members:JSON.stringify(i),subject:e("#bulk_subject").val(),message:e("#bulk_message").val()},cache:!1,success:function(t){e("#send_course_message").html(t),setTimeout(function(){a.html(s)},5e3)}})}),e("body").delegate("#add_student_to_course","click",function(t){t.preventDefault();var i=e(this),a=i.html(),s=e("#student_usernames").val();if(s.length<=0)return e("#add_student_to_course").html(vibe_course_module_strings.unable_add_students),void setTimeout(function(){i.html(a)},2e3);i.html('<i class="icon-sun-stroke animated spin"></i>'+vibe_course_module_strings.adding_students);e.ajax({type:"POST",url:ajaxurl,data:{action:"add_bulk_students",security:e("#buk_action").val(),course:i.attr("data-course"),members:s},cache:!1,success:function(t){t.length&&"0"!==t?(e("#add_student_to_course").html(vibe_course_module_strings.successfuly_added_students),e("ul.course_students").append(t)):e("#add_student_to_course").html(vibe_course_module_strings.unable_add_students),setTimeout(function(){i.html(a)},3e3)}})}),e("body").delegate("#download_stats","click",function(t){t.preventDefault();var i=e(this),a=i.html(),s=0,n=[];return e(".field:checked").each(function(){n[s]=e(this).attr("id"),s++}),0==s?(i.html(vibe_course_module_strings.select_fields),setTimeout(function(){i.html(a)},13e3),!1):(i.html('<i class="icon-sun-stroke animated spin"></i> '+vibe_course_module_strings.processing),void e.ajax({type:"POST",url:ajaxurl,data:{action:"download_stats",security:e("#stats_security").val(),course:i.attr("data-course"),fields:JSON.stringify(n),type:e("#stats_students").val()},cache:!1,success:function(e){i.attr("href",e),i.attr("id","download"),i.html(vibe_course_module_strings.download)}}))}),e("body").delegate("#download_mod_stats","click",function(t){t.preventDefault();var i=e(this),a=i.html(),s=0,n=[];return e(".field:checked").each(function(){n[s]=e(this).attr("id"),s++}),0==s?(i.html(vibe_course_module_strings.select_fields),setTimeout(function(){i.html(a)},13e3),!1):(i.html('<i class="icon-sun-stroke animated spin"></i> '+vibe_course_module_strings.processing),void e.ajax({type:"POST",url:ajaxurl,data:{action:"download_mod_stats",security:e("#stats_security").val(),type:i.attr("data-type"),id:i.attr("data-id"),fields:JSON.stringify(n),select:e("#stats_students").val()},cache:!1,success:function(e){i.attr("href",e),i.attr("id","download"),i.html(vibe_course_module_strings.download)}}))}),e("body").delegate("#assign_course_badge_certificate","click",function(t){t.preventDefault();var i=[],a=e(this),s=a.html();a.html('<i class="icon-sun-stroke animated spin"></i> '+vibe_course_module_strings.processing);var n=0;e(".member").each(function(){e(this).is(":checked")&&(i[n]=e(this).val(),n++)}),e.ajax({type:"POST",url:ajaxurl,data:{action:"assign_badge_certificates",security:e("#buk_action").val(),course:a.attr("data-course"),members:JSON.stringify(i),assign_action:e("#assign_action").val()},cache:!1,success:function(e){a.html(e),setTimeout(function(){a.html(s)},5e3)}})}),e("body").delegate("#extend_course_subscription","click",function(t){t.preventDefault();var i=[],a=e(this),s=a.html();a.html('<i class="icon-sun-stroke animated spin"></i> '+vibe_course_module_strings.processing);var n=0;e(".member").each(function(){e(this).is(":checked")&&(i[n]=e(this).val(),n++)}),e.ajax({type:"POST",url:ajaxurl,data:{action:"extend_course_subscription",security:e("#buk_action").val(),course:a.attr("data-course"),members:JSON.stringify(i),extend_amount:e("#extend_amount").val()},cache:!1,success:function(e){console.log(e),a.html(e),setTimeout(function(){a.html(s)},5e3)}})}),e("body").delegate("#mark-complete","media_loaded",function(t){t.preventDefault(),e(this).hasClass("tip")&&e(this).addClass("disabled")}),e("body").delegate("#mark-complete","media_complete",function(t){t.preventDefault(),e(this).hasClass("tip")&&(e(this).removeClass("disabled"),e(this).removeClass("tip"),e(this).tooltip("destroy"),jQuery(".tip").tooltip())}),e("body").delegate("#mark-complete","click",function(t){if(t.preventDefault(),e(this).hasClass("disabled"))return!1;var i=e(this),a=e(this).attr("data-unit");i.prepend('<i class="icon-sun-stroke animated spin"></i>'),e("body").find(".course_progressbar").removeClass("increment_complete"),e.ajax({type:"POST",url:ajaxurl,data:{action:"complete_unit",security:e("#hash").val(),course_id:e("#course_id").val(),id:a},cache:!1,success:function(t){i.find("i").remove(),i.html('<i class="icon-check"></i>'),e(".course_timeline").find(".active").addClass("done"),e("body").find(".course_progressbar").trigger("increment"),e("#mark-complete").addClass("disabled");var a="course_progress"+e("#course_id").val(),s=e(".course_progressbar").attr("data-value");e.cookie(a,s,{expires:1,path:"/"}),t.length>0&&(e("#next_unit").removeClass("hide"),e("#next_unit").attr("data-unit",t),e("#unit"+t).find("a").addClass("unit"),e("#unit"+t).find("a").attr("data-unit",t)),"undefined"!=typeof unit&&e(".unit_timer").trigger("finish")}})}),e(".course_progressbar").on("increment",function(t){if(e(this).hasClass("increment_complete"))return t.stopPropagation(),!1;var i=parseInt(e(this).attr("data-increase-unit")),a=parseInt(e(this).attr("data-value"));return newper=i+a,newper>100&&(newper=100),e(this).find(".bar").css("width",newper+"%"),e(this).find(".bar span").html(newper+"%"),e(this).addClass("increment_complete"),e(this).attr("data-value",newper),t.stopPropagation(),!1}),e(".course_progressbar").on("decrement",function(t){if(e(this).hasClass("increment_complete"))return t.stopPropagation(),!1;var i=parseInt(e(this).attr("data-increase-unit")),a=parseInt(e(this).attr("data-value"));return newper=a-i,newper<0&&(newper=0),e(this).find(".bar").css("width",newper+"%"),e(this).find(".bar span").html(newper+"%"),e(this).addClass("increment_complete"),e(this).attr("data-value",newper),t.stopPropagation(),!1}),jQuery(document).ready(function(e){e(".showhide_indetails").click(function(t){t.preventDefault(),e(this).find("i").toggleClass("icon-minus"),e(this).parent().find(".in_details").toggle()}),e(".ajax-certificate").each(function(){e(this).magnificPopup({type:"ajax",fixedContentPos:!0,alignTop:!0,preloader:!1,midClick:!0,removalDelay:300,showCloseBtn:!1,mainClass:"mfp-with-zoom",callbacks:{parseAjax:function(t){t.data=e(t.data).find("#certificate")},ajaxContentAdded:function(){html2canvas(e("#certificate"),{onrendered:function(t){var i=t.toDataURL();e("#certificate .certificate_content").html('<img src="'+i+'" />'),e("#certificate").trigger("generate_certificate")}})}}})}),e(".ajax-badge").each(function(){var t=e(this),i=t.find("img");e(this).magnificPopup({items:{src:'<div class="badge-popup"><img src="'+i.attr("src")+'" /><h3>'+t.attr("title")+"</h3><strong>"+vibe_course_module_strings.for_course+" "+t.attr("data-course")+"</strong></div>",type:"inline"},fixedContentPos:!1,alignTop:!1,preloader:!1,midClick:!0,removalDelay:300,showCloseBtn:!1,mainClass:"mfp-with-zoom center-aligned"})}),e("body").delegate(".print_unit","click",function(t){e(".unit_content").print()}),e("body").delegate(".printthis","click",function(t){e(this).parent().print();
}),e("body").delegate("#certificate","generate_certificate",function(t){e(this).addClass("certificate_generated")}),e("body").delegate(".certificate_print","click",function(t){t.preventDefault(),e(this).parent().parent().print()}),e(".widget_carousel").flexslider({animation:"slide",controlNav:!1,directionNav:!0,animationLoop:!0,slideshow:!1,prevText:"<i class='icon-arrow-1-left'></i>",nextText:"<i class='icon-arrow-1-right'></i>"}),e("body").delegate(".unit-page-links a","click",function(i){if(!e("body").hasClass("single-unit")){i.preventDefault();var a=e(this);a.prepend('<i class="icon-sun-stroke animated spin"></i>'),e(".main_unit_content").load(a.attr("href")+" .single_unit_content"),t(),e("body").trigger("unit_loaded"),a.find("i").remove(),e(".main_unit_content").trigger("unit_reload")}}),e("body").delegate(".pricing_course","click",function(t){e(this).toggleClass("active")}),e("body").delegate(".pricing_course li","click",function(t){var i=e(this).parent(),a=e(this);if(i.find(".active").removeClass("active"),a.addClass("active"),e(".course_button").length){var s=e(this).attr("data-value");e(".course_button").attr("href",s)}})}),e("body").delegate(".unit","click",function(i){if(i.preventDefault(),e(this).hasClass("disabled"))return!1;var a=e(this),s=e(this).attr("data-unit");a.prev().is("span")?a.prev().addClass("loading"):a.prepend('<i class="icon-sun-stroke animated spin"></i>'),e("#ajaxloader").removeClass("disabled"),e(".unit_content").addClass("loading"),e.ajax({type:"POST",url:ajaxurl,data:{action:"unit_traverse",security:e("#hash").val(),course_id:e("#course_id").val(),id:s},cache:!1,success:function(i){e("body,html").animate({scrollTop:0},1200),a.prev().is("span")?a.prev().removeClass("loading"):a.find("i").remove(),e("#ajaxloader").addClass("disabled"),e(".unit_content").removeClass("loading"),e(".unit_content").html(i);var s=e(e.parseHTML(i)).filter("#unit"),n="#unit"+s.attr("data-unit");e(".course_timeline").find(".active").removeClass("active"),e(n).addClass("active"),e(".unit_content").trigger("unit_traverse"),e("audio,video").mediaelementplayer({success:function(t,i,a){e("#mark-complete").trigger("media_loaded"),e(".mejs-container").each(function(){e(this).addClass("mejs-mejskin")}),t.addEventListener("ended",function(t){e("#mark-complete").trigger("media_complete")})}}),t(),e(".unit_wrap").hasClass("enable_comments")&&e(".unit_content").trigger("load_comments"),"undefined"!=typeof s&&e(".unit_timer").trigger("activate")}})}),e("body").delegate(".unit_content","load_comments",function(t){if(!e(this).find(".main_unit_content").hasClass("stop_notes")){var i=e("#unit").attr("data-unit");e(".unit_content p").each(function(t){e(this).attr("data-section-id",t),e(this).append('<span id="c'+t+'" class="side_comment">+</span>')}),unitComments(),e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"get_unit_comment_count",security:e("#hash").val(),unit_id:i},cache:!1,success:function(t){e.each(t,function(t,i){e("#"+i.id).text(i.count)})}}),e(".side_comment").on("click",function(){if(e(this).hasClass("active"))return!1;var t=e(this),a=e(".side_comment.active").attr("id");e(".side_comment").removeClass("active"),e('.side_comments .main_comments>li:not(".hide")').remove(),e(this).addClass("active");var s=e(this).attr("id");e(".add-comment").fadeIn(),e(".add-comment").next().fadeOut();var n=e(this).text(),r="#";if(e(".side_comments .main_comments").find(".loaded").remove(),jQuery.isNumeric(n)){var o="",c="unit_comments"+i,l=sessionStorage.getItem(c);null!==l?(console.log("no-ajax"),l=JSON.parse(l),e.each(l,function(a,n){e.each(n,function(a,n){s==a&&(o+='<li class="loaded"><div class="'+n.type+" user"+n.author.user_id+'" data-id="'+n.ID+'"><img src="'+n.author.img+'"><a href="'+n.author.link+'" class="unit_comment_author">'+n.author.name+'</a><div class="unit_comment_content">'+n.content+'</div><ul class="actions" data-pid="'+t.attr("id")+'">',jQuery.each(n.controls,function(e,t){t>1&&jQuery(".side_comments li.hide").find("."+e).addClass("meta_info").attr("data-meta",t);var i=jQuery(".side_comments li.hide").find("."+e).parent()[0].outerHTML;t>1&&jQuery(".side_comments li.hide").find("."+e).removeClass("meta_info").removeAttr("data-meta"),o+=i}),o+="</ul></div></li>",r=e(o).find(".popup_unit_comment").removeClass("meta_info").attr("data-href"),r+="?unit_id="+i+"&section="+a)})}),e(".side_comments .main_comments").append(o),e(".side_comments .main_comments .popup_unit_comment").attr("href",r),jQuery(".tip").tooltip(),e(".popup_unit_comment").magnificPopup({type:"ajax",alignTop:!0,fixedContentPos:!0,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in",callbacks:{parseAjax:function(t){t.data=e(t.data).find(".content")}}})):(a=e(".side_comment.active").attr("id"),console.log("ajax"),e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"unit_section_comments",security:e("#hash").val(),unit_id:i,section:a,num:e(".side_comment").length},cache:!1,success:function(a){var n=JSON.stringify(a);sessionStorage.setItem(c,n),e.each(a,function(a,n){e.each(n,function(a,n){if(s==a){o+='<li class="loaded"><div class="'+n.type+" user"+n.author.user_id+'" data-id="'+n.ID+'"><img src="'+n.author.img+'"><a href="'+n.author.link+'" class="unit_comment_author">'+n.author.name+'</a><div class="unit_comment_content">'+n.content+'</div><ul class="actions" data-pid="'+t.attr("id")+'">',jQuery.each(n.controls,function(e,t){t>1&&jQuery(".side_comments li.hide").find("."+e).addClass("meta_info").attr("data-meta",t);var i=jQuery(".side_comments li.hide").find("."+e).parent()[0].outerHTML;t>1&&jQuery(".side_comments li.hide").find("."+e).removeClass("meta_info").removeAttr("data-meta"),o+=i}),o+="</ul></div></li>";var r=e(o).find(".popup_unit_comment").attr("href");r+="?unit_id="+i+"&section="+a,e(o).find(".popup_unit_comment").attr("href",r)}})}),e(".side_comments .main_comments").append(o),jQuery(".tip").tooltip(),e(".popup_unit_comment").magnificPopup({type:"ajax",alignTop:!0,fixedContentPos:!0,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in",callbacks:{parseAjax:function(t){console.log(t),t.data=e(t.data).find(".content")}}})}}))}var u=e("#all_comments_link").attr("data-href");u+="?unit_id="+i+"&section="+e(".side_comment.active").attr("id"),e("#all_comments_link").attr("href",u);var d=e(this).offset().top;console.log(e(this).attr("id"));var m=e("#unit_content").offset().top,_=e(".side_comments").height(),h=e(".unit_prevnext").offset().top;if(d+_>h?d=h-m-_:d-=m,d>0)e(".side_comments").css("top",d+"px"),e(".side_comments").removeClass("scroll");else{e(".side_comments").addClass("scroll");var p=e(".main_unit_content").height();e(".side_comments").css("height",p+"px")}})}}),jQuery(document).ready(function(e){e(".add-comment").on("click",function(){e(this).fadeOut(0),e(this).next(".comment-form").fadeIn(100)}),e(".new_side_comment").on("click",function(){e(this).hasClass("cleared")||(e(this).html(""),e(this).addClass("cleared"),e(this).parent().parent().addClass("active"),e(this).parent().parent().parent().find(".add-comment").addClass("deactive"))}),e(".remove_side_comment").on("click",function(){e(this).closest(".side_comments").find(".add-comment").fadeIn(100),e(this).closest(".comment-form").fadeOut(),e(".new_side_comment").removeClass("cleared"),e(".new_side_comment").text(vibe_course_module_strings.add_comment)})}),e("body").delegate(".public_unit_comment","click",function(t){t.preventDefault();var i=e(this),a=i.closest("li.loaded>div").attr("data-id");e.ajax({type:"POST",url:ajaxurl,data:{action:"public_user_comment",security:e("#hash").val(),id:a},cache:!1,success:function(t){i.removeClass("public_unit_comment"),i.addClass("private_unit_comment"),i.find("i").removeClass().addClass("icon-fontawesome-webfont-4"),i.attr("data-original-title",vibe_course_module_strings.private_comment);var a=e("#unit").attr("data-unit"),s="unit_comments"+a;sessionStorage.removeItem(s)}})}),e("body").delegate(".private_unit_comment","click",function(t){t.preventDefault();var i=e(this),a=i.closest("li.loaded>div").attr("data-id");e.ajax({type:"POST",url:ajaxurl,data:{action:"private_user_comment",security:e("#hash").val(),id:a},cache:!1,success:function(t){i.removeClass("private_unit_comment"),i.addClass("public_unit_comment"),i.find("i").removeClass().addClass("icon-fontawesome-webfont-3"),i.attr("data-original-title",vibe_course_module_strings.public_comment);var a=e("#unit").attr("data-unit"),s="unit_comments"+a;sessionStorage.removeItem(s)}})}),e("body").delegate(".edit_unit_comment","click",function(t){t.preventDefault();var i=e(this),a=i.parent().parent().parent(),s=e(".comment-form").first().clone(),n=a.find("img").clone(),r=a.find(".unit_comment_author").clone(),o=a.attr("data-id");s.find("img").replaceWith(function(){return n}),s.find("span").replaceWith(function(){return r});var c=a.find(".unit_comment_content");s.find(".new_side_comment").html(c.html()),s.find(".post_unit_comment").removeClass().addClass("edit_form_unit_comment").attr("data-id",o),s.find(".remove_side_comment").removeClass().addClass("remove_form_edit_unit_comment"),a.parent().append(s),a.hide(),a.parent().find(".comment-form").show()}),e("body").delegate(".remove_form_edit_unit_comment","click",function(t){e(this).parent().parent().parent().parent().find(".note,.public").show(),e(this).closest(".comment-form").remove(),e(".new_side_comment").removeClass("cleared")}),e("body").delegate(".reply_unit_comment","click",function(t){t.preventDefault();var i=e(this).parent().parent().parent().parent();if(e(this).hasClass("meta_info")){var a=e(this).attr("data-meta");e.ajax({type:"POST",url:ajaxurl,data:{action:"get_user_reply",security:e("#hash").val(),id:a},cache:!1,success:function(e){jQuery.isNumeric(e)||i.after(e)}})}else e(".add-comment").trigger("click"),e(".comment-form").addClass("creply"),e(".comment-form").attr("data-cid",e(this).closest(".actions").parent().attr("data-id"))}),e("body").delegate(".instructor_reply_unit_comment","click",function(t){if(t.preventDefault(),e(this).hasClass("call"))return!1;var i=e(this),a=i.parent().parent().parent().find(".unit_comment_content").html(),s=e("#unit").attr("data-unit");e.ajax({type:"POST",url:ajaxurl,data:{action:"instructor_reply_user_comment",security:e("#hash").val(),message:a,id:s,section:e(".side_comment.active").attr("id")},cache:!1,success:function(e){console.log(e),i.addClass("call")}})}),e("body").delegate(".edit_form_unit_comment","click",function(t){t.preventDefault();var i=e(this),a=i.attr("data-id"),s=e(".new_side_comment").html();e.ajax({type:"POST",url:ajaxurl,data:{action:"edit_user_comment",security:e("#hash").val(),content:s,id:a},cache:!1,success:function(t){var a=e("#unit").attr("data-unit"),n="unit_comments"+a;sessionStorage.removeItem(n);var r=i.closest(".comment-form").prev().parent();r.find(".unit_comment_content").html(s),i.closest(".comment-form").remove(),r.find(".note,.public").show()}})}),e("body").delegate(".remove_unit_comment","click",function(t){t.preventDefault();var i=e(this),a=i.parent().parent().closest("li>div").attr("data-id");i.addClass("animated spin"),e.confirm({text:vibe_course_module_strings.remove_comment,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"remove_user_comment",security:e("#hash").val(),id:a},cache:!1,success:function(t){i.removeClass("animated"),i.removeClass("spin");var a=i.closest(".actions").attr("data-pid"),s=parseInt(e("#"+a).text());s--,e("#"+a).text(s),i.closest("li.loaded").fadeOut(200,function(){e(this).remove()});var n=e("#unit").attr("data-unit"),r="unit_comments"+n;e(".new_side_comment").removeClass("cleared"),sessionStorage.removeItem(r)}})},cancel:function(){i.removeClass("animated"),i.removeClass("spin")},confirmButton:vibe_course_module_strings.remove_comment_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate(".post_unit_comment","click",function(t){if(t.preventDefault(),e(this).hasClass("disabled"))return!1;var i=0;e(this).closest(".comment-form").hasClass("creply")&&(i=e(this).closest(".comment-form").attr("data-cid"));var a=e(this),s=e(".side_comment.active").attr("id"),n=e("#unit").attr("data-unit"),r=a.closest(".side_comments").find("ul.main_comments"),o=r.find("li.hide").clone(),c=e(this).closest(".comment-form").find(".new_side_comment").html();a.addClass("disabled"),e.ajax({type:"POST",url:ajaxurl,data:{action:"post_unit_comment",security:e("#hash").val(),course_id:e("#course_id").val(),unit_id:n,content:c,section:s,reply:i},cache:!1,success:function(t){if(a.removeClass("disabled"),jQuery.isNumeric(t)){var i="unit_comments"+n;e.cookie(i),{section:{content:c,type:"note",author:{img:o.find("img").attr("src"),name:o.find(".unit_comment_author").text(),link:o.find(".unit_comment_author").attr("href")},controls:{edit_unit_comment:1,public_unit_comment:1,instructor_reply_unit_comment:1,popup_unit_comment:1,remove_unit_comment:1}}};sessionStorage.removeItem(i),o.find(".unit_comment_content").html(c),o.removeClass(),o.find(".actions .private_unit_comment").parent().remove(),r.append(o);var l=e(o).find(".popup_unit_comment").attr("data-href");l+="?unit_id="+n+"&section="+e(".side_comment.active").attr("id"),e(o).find(".popup_unit_comment").attr("href",l),jQuery(".tip").tooltip();var u=e("#"+s).text();u=jQuery.isNumeric(u)?parseInt(u)+1:1,e(".new_side_comment").removeClass("cleared"),e("#"+s).text(u),e(".add-comment").fadeIn(),e(".comment-form").removeClass("active").fadeOut(),e(".new_side_comment").text(vibe_course_module_strings.add_comment),e(".popup_unit_comment").magnificPopup({type:"ajax",alignTop:!0,fixedContentPos:!0,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in",callbacks:{parseAjax:function(t){t.data=e(t.data).find(".content")}}})}else a.closest(".comment-form").append('<div class="error">'+t+"</div>")}})}),e("body").delegate(".note-tabs li","click",function(t){t.preventDefault(),e(this).parent().find(".selected").removeClass("selected"),e(this).addClass("selected");var i=e(this).attr("id");e.ajax({type:"POST",url:ajaxurl,data:{action:i,security:e("#hash").val(),unit_id:e.urlParam("unit_id"),section:e.urlParam("section")},cache:!1,success:function(t){e(".content").html(t),e(".live-edit").liveEdit({afterSaveAll:function(e){return!1}})}})}),e("body").delegate("#load_more_notes","click",function(t){var i=e("#notes_query").html();e.ajax({type:"POST",url:ajaxurl,data:{action:"load_more_notes",security:e("#hash").val(),json:i},cache:!1,success:function(t){if(jQuery.isNumeric(t))e("#load_more_notes").hide();else{var i=e(t).filter("#new_notes_query").html();e("#notes_query").html(i),e("#notes_discussions .notes_list").append(t),e("#new_notes_query").remove()}e(".live-edit").liveEdit({afterSaveAll:function(e){return!1}})}})}),jQuery(document).ready(function(){jQuery(".course_curriculum.accordion .course_section").click(function(e){jQuery(this).toggleClass("show"),jQuery(this).nextUntil(".course_section").toggleClass("show")}),jQuery(".course_timeline.accordion .section").on("click",function(e){jQuery(this).toggleClass("show"),jQuery(this).nextUntil(".section").toggleClass("show")}),jQuery(".course_timeline.accordion").each(function(){var t=e(this);t.find(".unit_line.active").prevAll(".section").trigger("click")}),e(".unit_content").on("unit_traverse",function(){var t=e(".course_timeline.accordion").find(".unit_line.active").prev(".section");e(".course_timeline.accordion").find(".unit_line.active").prev().hasClass("section")&&jQuery(".course_timeline.accordion .section.show").trigger("click"),t.hasClass("show")||t.trigger("click")}),e(".retake_submit").click(function(){e(this).parent().submit()})}),e(document).ready(function(){e(".inquiz_timer").each(function(){e(".inquiz_timer").one("activate",function(){var t=parseInt(e(this).attr("data-time")),i=e(this).find(".timer"),a=e(this);i.timer({timer:t,width:72,height:72,fgColor:vibe_course_module_strings.theme_color}),i.on("change",function(){var t=a.find(".countdown"),s=parseInt(i.attr("data-timer"));if(s>0){s--,i.attr("data-timer",s);var n="";n=s>60?Math.floor(s/60)+":"+(parseInt(s%60)<10?"0"+parseInt(s%60):parseInt(s%60)):"00:"+(10>s?"0"+s:s),t.html(n)}else t.html(vibe_course_module_strings.timeout),e(".submit_inquiz").hasClass("triggerred")||(e(".submit_inquiz").addClass("triggerred"),e(".submit_inquiz").trigger("click")),e(".inquiz_timer").trigger("deactivate")})}),e(".inquiz_timer").one("deactivate",function(t){var i=0,a=e(this).find(".timer");e(this);a.knob({readonly:!0,max:i,width:72,height:72,fgColor:vibe_course_module_strings.theme_color,readonly:!0}),t.stopPropagation()});var t=parseInt(e(this).attr("data-time")),i=e(this).find(".timer");i.knob({readonly:!0,max:t,width:72,height:72,fgColor:vibe_course_module_strings.theme_color,thickness:.1,readonly:!0}),e(this).hasClass("start")&&e(".inquiz_timer").trigger("activate")})}),e(".unit_content").on("unit_traverse",function(){e(".inquiz_timer").each(function(){e(".inquiz_timer").one("activate",function(){var t=parseInt(e(this).attr("data-time")),i=e(this).find(".timer"),a=e(this);i.timer({timer:t,width:72,height:72,fgColor:vibe_course_module_strings.theme_color}),i.on("change",function(){var t=a.find(".countdown"),s=parseInt(i.attr("data-timer"));if(s>0){s--,i.attr("data-timer",s);var n="";n=s>60?Math.floor(s/60)+":"+(parseInt(s%60)<10?"0"+parseInt(s%60):parseInt(s%60)):"00:"+(10>s?"0"+s:s),t.html(n)}else t.html(vibe_course_module_strings.timeout),e(".submit_inquiz").hasClass("triggerred")||(e(".submit_inquiz").addClass("triggerred"),e(".submit_inquiz").trigger("click")),e(".inquiz_timer").trigger("deactivate")})}),e(".inquiz_timer").one("deactivate",function(t){var i=0,a=e(this).find(".timer");e(this);a.knob({readonly:!0,max:i,width:72,height:72,fgColor:vibe_course_module_strings.theme_color,readonly:!0}),t.stopPropagation()});var t=parseInt(e(this).attr("data-time")),i=e(this).find(".timer");i.knob({readonly:!0,max:t,width:72,height:72,fgColor:vibe_course_module_strings.theme_color,thickness:.1,readonly:!0}),e(this).hasClass("start")&&e(".inquiz_timer").trigger("activate")})}),e("body").delegate(".unit_button.start_quiz","click",function(i){i.preventDefault();var a=e(this);a.hasClass("continue")?e.ajax({type:"POST",url:ajaxurl,data:{action:"in_start_quiz",security:e("#hash").val(),quiz_id:e("#unit.quiz_title").attr("data-unit")},cache:!1,success:function(i){e(".main_unit_content").html(i),e(".in_quiz").trigger("question_loaded"),a.removeClass("start_quiz continue"),a.attr("href","#"),a.addClass("submit_inquiz"),t(),a.text(vibe_course_module_strings.submit_quiz),e(".quiz_title .inquiz_timer").trigger("activate")}}):e.confirm({text:vibe_course_module_strings.start_quiz_notification,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"in_start_quiz",security:e("#hash").val(),quiz_id:e("#unit.quiz_title").attr("data-unit")},cache:!1,success:function(i){e(".main_unit_content").html(i),e(".in_quiz").trigger("question_loaded"),a.removeClass("start_quiz"),a.attr("href","#"),a.addClass("submit_inquiz"),t(),a.text(vibe_course_module_strings.submit_quiz),e(".quiz_title .inquiz_timer").trigger("activate")}})},cancel:function(){},confirmButton:vibe_course_module_strings.confirm,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate(".unit_button.submit_inquiz","click",function(i){i.preventDefault();var a=e(this),s=[];"undefined"!=typeof all_questions_json?(e.each(all_questions_json,function(e,t){var i={id:t,value:sessionStorage.getItem(t)};s.push(i)}),a.hasClass("triggerred")?e.ajax({type:"POST",url:ajaxurl,data:{action:"in_submit_quiz",security:e("#hash").val(),quiz_id:e("#unit.quiz_title").attr("data-unit"),answers:JSON.stringify(s)},cache:!1,success:function(i){e(".main_unit_content").html(i),e(".quiz_title .inquiz_timer").trigger("deactivate"),e(".in_quiz").trigger("question_loaded"),a.removeClass("submit_inquiz"),e(".quiz_title .quiz_meta").addClass("hide"),a.addClass("quiz_results_popup"),a.attr("href",e("#results_link").val()),t(),a.text(vibe_course_module_strings.check_results),e("#unit"+e("#unit.quiz_title").attr("data-unit")).addClass("done"),e("body").find(".course_progressbar").removeClass("increment_complete"),e("body").find(".course_progressbar").trigger("increment")}}):e.confirm({text:vibe_course_module_strings.start_quiz_notification,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"in_submit_quiz",security:e("#hash").val(),quiz_id:e("#unit.quiz_title").attr("data-unit"),answers:JSON.stringify(s)},cache:!1,success:function(i){e(".main_unit_content").html(i),e(".quiz_title .inquiz_timer").trigger("deactivate"),e(".in_quiz").trigger("question_loaded"),a.removeClass("submit_inquiz"),e(".quiz_title .quiz_meta").addClass("hide"),a.addClass("quiz_results_popup"),a.attr("href",e("#results_link").val()),t(),a.text(vibe_course_module_strings.check_results),e("#unit"+e("#unit.quiz_title").attr("data-unit")).addClass("done"),e("body").find(".course_progressbar").removeClass("increment_complete"),e("body").find(".course_progressbar").trigger("increment")}})},cancel:function(){},confirmButton:vibe_course_module_strings.confirm,cancelButton:vibe_course_module_strings.cancel})):alert(vibe_course_module_strings.submit_quiz_error)}),e("body").delegate(".in_quiz .pagination ul li a.quiz_page","click",function(i){i.preventDefault();var a=e(this),s=e(this).text();e.ajax({type:"POST",url:ajaxurl,data:{action:"in_start_quiz",security:e("#hash").val(),quiz_id:e("#unit.quiz_title").attr("data-unit"),page:s},cache:!1,success:function(i){e(".main_unit_content").html(i),e(".in_quiz").trigger("question_loaded"),a.removeClass("start_quiz"),a.addClass("submit_quiz"),t(),a.text(vibe_course_module_strings.submit_quiz)}})}),e("body").delegate(".in_quiz","question_loaded",function(){if(t(),e(".quiz_meta").trigger("progress_check"),e(".matchgrid_options").hasClass("saved_answer")){var i;e(".matchgrid_options li").each(function(t,a){i=e(".matchgrid_options").attr("data-match"+t),e(this).append(e("#"+i))})}jQuery(".question_options.sort").each(function(){var t="1",i=e("ul.question_options li").size();if(i>1)for(var a=2;i>=a;a++)t=t+","+a;jQuery(".question_options.sort").sortable({revert:!0,cursor:"move",refreshPositions:!0,opacity:.6,scroll:!0,containment:"parent",placeholder:"placeholder",tolerance:"pointer",update:function(t,i){var a=e(".question_options.sort").sortable("toArray").toString(),s=e(this).parent().attr("data-ques");sessionStorage.setItem(s,a),e(".quiz_meta").trigger("progress_check")}}).disableSelection()}),e(".live-edit").liveEdit({afterSaveAll:function(e){return!1}}),e(".vibe_fillblank").on("blur",function(){var t=e(this).text(),i=e(this).parent().parent().parent().parent().attr("data-ques");sessionStorage.setItem(i,t),e(".quiz_meta").trigger("progress_check")}),e(".question_options.match").droppable({drop:function(t,i){e(i.draggable).removeAttr("style"),e(this).addClass("ui-state-highlight").append(e(i.draggable))}}),e(".question_options.match li").draggable({revert:"invalid",containment:".in_question"}),e(".matchgrid_options li").droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",drop:function(t,i){if(childCount=e(this).find("li").length,e(i.draggable).removeAttr("style"),0==childCount){e(this).addClass("ui-state-highlight").append(e(i.draggable));var a="";e(this).parent().find("li.match_option").each(function(){var t=e(this).attr("id");jQuery.isNumeric(t)&&(a+=t+",")});var s=e(this).parent().parent().parent().parent().attr("data-ques");sessionStorage.setItem(s,a),e(".quiz_meta").trigger("progress_check")}}}),e(".question.largetext+textarea").on("blur",function(){var t=e(this).val(),i=e(this).parent().attr("data-ques");sessionStorage.setItem(i,t),e(".quiz_meta").trigger("progress_check")}),e(".question.smalltext+input").on("blur",function(){var t=e(this).val(),i=e(this).parent().attr("data-ques");sessionStorage.setItem(i,t),e(".quiz_meta").trigger("progress_check")}),e("#vibe_select_dropdown").change(function(){var t=e(this).parent().parent().parent().attr("data-ques"),i=e(this).val();sessionStorage.setItem(t,i),e(".quiz_meta").trigger("progress_check")}),e(".question_options.truefalse li").click(function(){var t=e(this).find("input:checked").attr("name"),i=e(this).find("input:checked").val();sessionStorage.setItem(t,i),e(".quiz_meta").trigger("progress_check")}),e(".question_options.single li").click(function(){var t=e(this).find("input:checked").attr("name"),i=e(this).find("input:checked").val();sessionStorage.setItem(t,i),e(".quiz_meta").trigger("progress_check")}),e(".question_options.multiple li").click(function(){var t=(e(this).find("input:checked").attr("class"),e(this).parent().parent().attr("data-ques")),i="";e(this).parent().find("input:checked").each(function(){i+=e(this).val()+","}),sessionStorage.setItem(t,i),e(".quiz_meta").trigger("progress_check")})}),e("body").delegate(".in_quiz","question_loaded",function(){"undefined"!=typeof questions_json&&e.each(questions_json,function(t,i){e(".in_question[data-ques="+i+"]").each(function(){var t=e(this),a=e(this).find(".question").attr("class");switch(a){case"question match":var s=sessionStorage.getItem(i);if(null!==s){var n=s.split(",");e.each(n,function(i,a){e.isNumeric(a)&&t.find(".matchgrid_options>ul>li").eq(i).append(e("#"+a))})}break;case"question sort":var s=sessionStorage.getItem(i);if(null!==s){var n=s.split(",");e.each(n,function(i,a){e.isNumeric(a)&&t.find(".question_options.sort>li#"+a).remove().appendTo(".question_options.sort")})}break;case"question single":var s=sessionStorage.getItem(i);null!==s&&e(this).find('input[value="'+s+'"]').prop("checked",!0);break;case"question multiple":var s=sessionStorage.getItem(i);if(null!==s){var n=s.split(",");e.each(n,function(e,i){t.find('input[value="'+i+'"]').prop("checked",!0)})}break;case"question select":e(this).find("select").val(sessionStorage.getItem(i));break;case"question truefalse":var s=sessionStorage.getItem(i);null!==s&&e(this).find('input[value="'+s+'"]').prop("checked",!0);break;case"question fillblank":e(this).find(".vibe_fillblank").text(sessionStorage.getItem(i));break;case"question smalltext":e(this).find("input").val(sessionStorage.getItem(i));break;case"question largetext":e(this).find("textarea").val(sessionStorage.getItem(i))}})})}),e("body").delegate(".quiz_meta","progress_check",function(){if("undefined"!=typeof all_questions_json){var t=all_questions_json.length,i=0;e.each(all_questions_json,function(e,t){null!==sessionStorage.getItem(t)&&i++}),e(".quiz_meta").hasClass("show_progress")||e(".quiz_meta").addClass("show_progress"),e(".quiz_meta i span").text(i+"/"+t);var a=Math.round(100*(i/t));e(".quiz_meta .progress .bar").css("width",a+"%")}})}(jQuery);